/* regexp-events v1.0.0 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define("regexp-events",["exports"],e):e(t.RegExpEvents={})}(this,function(t){"use strict";var e="[object String]",n=Object.prototype.toString,r=Array.isArray;var o=function(t){return"string"==typeof t||!r(t)&&!!(o=t)&&"object"==typeof o&&n.call(t)==e;var o},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function t(e,n,r){if(c(this,t),!o(e))throw new Error("Event.type has to be a string");this.type=e,this.args=n||[],this.target=r};function a(t,e,n){if(n)t.delete(e);else{var r=t.get(e);r.filter(function(t){return!t.isStatic}).forEach(function(t,e){r.splice(r.indexOf(t),1)}),0===r.length&&t.delete(e)}}function s(t,e){return t instanceof RegExp&&e instanceof RegExp&&e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline&&e.sticky===t.sticky&&e.unicode===t.unicode}var l="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var p="[object AsyncFunction]",v="[object Function]",h="[object GeneratorFunction]",y="[object Null]",g="[object Proxy]",d="[object Undefined]",b="object"==typeof l&&l&&l.Object===Object&&l,E="object"==typeof self&&self&&self.Object===Object&&self,m=b||E||Function("return this")(),j=Object.prototype,w=j.hasOwnProperty,x=j.toString,S=m.Symbol,k=S?S.toStringTag:void 0;function M(t){return null==t?void 0===t?d:y:k&&k in Object(t)?function(t){var e=w.call(t,k),n=t[k];try{t[k]=void 0;var r=!0}catch(t){}var o=x.call(t);r&&(e?t[k]=n:delete t[k]);return o}(t):(e=t,x.call(e));var e}var O,R=function(t){if(n=typeof(e=t),null==e||"object"!=n&&"function"!=n)return!1;var e,n,r=M(t);return r==v||r==h||r==p||r==g},A=(function(t,e){var n="[object RegExp]",r="object"==typeof l&&l&&l.Object===Object&&l,o=e&&!e.nodeType&&e,i=o&&t&&!t.nodeType&&t,c=i&&i.exports===o&&r.process,f=function(){try{return c&&c.binding("util")}catch(t){}}(),u=f&&f.isRegExp;var a=Object.prototype.toString;var s,p=u?(s=u,function(t){return s(t)}):function(t){return r=typeof(e=t),!!e&&("object"==r||"function"==r)&&a.call(t)==n;var e,r};t.exports=p}(O={exports:{}},O.exports),O.exports);function q(t){return!0===t||!1===t}function F(t,e,n,r){for(var o=0;o<t.length-n;o++)if(e(t[n+o]))return t[n+o];return r}var P=function(){function t(){c(this,t),this.suppressEvents=!1}return f(t,[{key:"on",value:function(e,n,r,c,f){if(!(o(e)||A(e)||e instanceof u))throw new Error("Emitter.on requires a String, Event or RegExp as the first argument");if(!R(n))throw new Error("Emitter.on requires a function as the second argument");c=F(arguments,q,2,!1),f=F(arguments,function(t){return Number.isFinite(t)||t===1/0},2,1/0),r=F(arguments,function(t){return"object"===(void 0===t?"undefined":i(t))},2,void 0);var a=this.eventMap;return a||(a=t.createEventMap(this)),e instanceof u&&(e=e.type),a.has(e)||a.set(e,[]),a.get(e).push({func:n,ctx:r,times:f,isStatic:c}),this}},{key:"once",value:function(t,e,n,r){return this.on(t,e,1,n,r)}},{key:"off",value:function(t,e,n,r){if(null==t)throw new Error("Emitter.off requires a String or a RegExp as the first argument");if(!R(e))throw new Error("Emitter.off requires a function as the second argument");r=F(arguments,q,2,!1),n=F(arguments,function(t){return"object"===(void 0===t?"undefined":i(t))},2,void 0),t instanceof u&&(t=t.type);var c=this.eventMap;if(!c)return this;if(c.has(t)||c.set(t,[]),o(t)){var f=c.get(t);f.forEach(function(t,o){t.func!==e||t.ctx!==n||t.isStatic&&!r||f.splice(o,1)}),0===f.length&&c.delete(t)}else A(t)&&c.forEach(function(o,i){A(i)&&s(t,i)&&(o.forEach(function(t,i){t.func!==e||t.ctx!==n||t.isStatic&&!r||o.splice(i,1)}),0===o.length&&c.delete(i))});return this}},{key:"emit",value:function(t){var e=this;if(!this.suppressEvents){var n=this.eventMap,r=void 0;if(!n)return this;for(var i=arguments.length,c=Array(i>1?i-1:0),f=1;f<i;f++)c[f-1]=arguments[f];if(t instanceof u)void 0===(r=t).target&&(r.target=this);else{if(!o(t))throw new Error("Emitter.emit requires a String or Event as the first argument");r=new u(t,c,this)}var a=Array.from(r.args).concat([r]);return n.forEach(function(t,n){(o(r.type)&&n===r.type||o(r.type)&&A(n)&&n.test(r.type)||A(r.type)&&A(n)&&s(n,r.type))&&t.forEach(function(t){t.func.apply(t.ctx,a),--t.times<=0&&e.off(r.type,t.func,t.ctx,!0)})}),this}}},{key:"clear",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.eventMap;return r?(o(t)?a(r,t,e):t instanceof u?a(r,t.type,e):A(t)?Array.from(r).map(function(t){return t[0]}).forEach(function(i){(o(i)&&n&&t.test(i)||A(i)&&s(i,t))&&a(r,i,e)}):1===arguments.length&&!0===t?r.clear():(!1===t||void 0===t)&&arguments.length<=1&&r.forEach(function(t,e){t.filter(function(t){return!t.isStatic}).forEach(function(e){t.splice(t.indexOf(e),1)}),0===t.length&&r.delete(e)}),this):this}},{key:"count",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.eventMap;if(!n)return 0;if(o(t))return n.has(t)?n.get(t).length:0;if(t instanceof u)return n.has(t.type)?n.get(t.type).length:0;if(A(t)){var r=0;return n.forEach(function(n,i){(o(i)&&e&&t.test(i)||A(i)&&s(i,t))&&(r+=n.length)}),r}var i=0;return n.forEach(function(t){i+=t.length}),i}},{key:"dispose",value:function(){return t.removeEventMap(this),this}},{key:"eventMap",get:function(){return t.getEventMap(this)}}],[{key:"getEventMap",value:function(t){return(this.events||(this.events=new WeakMap)).get(t)}},{key:"createEventMap",value:function(t){var e=this.events||(this.events=new WeakMap),n=new Map;return e.set(t,n),n}},{key:"removeEventMap",value:function(t){var e=this.events||(this.events=new WeakMap);e.has(t)&&e.delete(t)}}]),t}();t.Emitter=P,t.Event=u,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=regexp-events.umd.min.js.map

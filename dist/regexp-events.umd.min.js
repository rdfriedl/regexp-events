/* regexp-events v1.0.1 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define("regexp-events",["exports"],t):t(e.RegExpEvents={})}(this,function(e){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function e(t,r,i){if(n(this,e),"string"!=typeof t)throw new Error("Event.type has to be a string");this.type=t,this.args=r||[],this.target=i};function o(e,t,n){if(n)e.delete(t);else{var r=e.get(t);r.filter(function(e){return!e.isStatic}).forEach(function(e,t){r.splice(r.indexOf(e),1)}),0===r.length&&e.delete(t)}}function f(e,t){return e instanceof RegExp&&t instanceof RegExp&&t.source===e.source&&t.global===e.global&&t.ignoreCase===e.ignoreCase&&t.multiline===e.multiline&&t.sticky===e.sticky&&t.unicode===e.unicode}function s(e){return!0===e||!1===e}function a(e,t,n,r){for(var i=0;i<e.length-n;i++)if(t(e[n+i]))return e[n+i];return r}var u=function(){function e(){n(this,e),this.suppressEvents=!1}return r(e,[{key:"on",value:function(n,r,o,f,u){if(!("string"==typeof n||n instanceof RegExp||n instanceof i))throw new Error("Emitter.on requires a String, Event or RegExp as the first argument");if("function"!=typeof r)throw new Error("Emitter.on requires a function as the second argument");f=a(arguments,s,2,!1),u=a(arguments,function(e){return Number.isFinite(e)||e===1/0},2,1/0),o=a(arguments,function(e){return"object"===(void 0===e?"undefined":t(e))},2,void 0);var c=this.eventMap;return c||(c=e.createEventMap(this)),n instanceof i&&(n=n.type),c.has(n)||c.set(n,[]),c.get(n).push({func:r,ctx:o,times:u,isStatic:f}),this}},{key:"once",value:function(e,t,n,r){return this.on(e,t,1,n,r)}},{key:"off",value:function(e,n,r,o){if(null==e)throw new Error("Emitter.off requires a String or a RegExp as the first argument");if("function"!=typeof n)throw new Error("Emitter.off requires a function as the second argument");o=a(arguments,s,2,!1),r=a(arguments,function(e){return"object"===(void 0===e?"undefined":t(e))},2,void 0),e instanceof i&&(e=e.type);var u=this.eventMap;if(!u)return this;if(u.has(e)||u.set(e,[]),"string"==typeof e){var c=u.get(e);c.forEach(function(e,t){e.func!==n||e.ctx!==r||e.isStatic&&!o||c.splice(t,1)}),0===c.length&&u.delete(e)}else e instanceof RegExp&&u.forEach(function(t,i){i instanceof RegExp&&f(e,i)&&(t.forEach(function(e,i){e.func!==n||e.ctx!==r||e.isStatic&&!o||t.splice(i,1)}),0===t.length&&u.delete(i))});return this}},{key:"emit",value:function(e){var t=this;if(!this.suppressEvents){var n=this.eventMap,r=void 0;if(!n)return this;for(var o=arguments.length,s=Array(o>1?o-1:0),a=1;a<o;a++)s[a-1]=arguments[a];if(e instanceof i)void 0===(r=e).target&&(r.target=this);else{if("string"!=typeof e)throw new Error("Emitter.emit requires a String or Event as the first argument");r=new i(e,s,this)}var u=Array.from(r.args).concat([r]);return n.forEach(function(e,n){("string"==typeof r.type&&n===r.type||"string"==typeof r.type&&n instanceof RegExp&&n.test(r.type)||r.type instanceof RegExp&&n instanceof RegExp&&f(n,r.type))&&e.forEach(function(e){e.func.apply(e.ctx,u),--e.times<=0&&t.off(r.type,e.func,e.ctx,!0)})}),this}}},{key:"clear",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.eventMap;return r?("string"==typeof e?o(r,e,t):e instanceof i?o(r,e.type,t):e instanceof RegExp?Array.from(r).map(function(e){return e[0]}).forEach(function(i){("string"==typeof i&&n&&e.test(i)||i instanceof RegExp&&f(i,e))&&o(r,i,t)}):1===arguments.length&&!0===e?r.clear():(!1===e||void 0===e)&&arguments.length<=1&&r.forEach(function(e,t){e.filter(function(e){return!e.isStatic}).forEach(function(t){e.splice(e.indexOf(t),1)}),0===e.length&&r.delete(t)}),this):this}},{key:"count",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.eventMap;if(!n)return 0;if("string"==typeof e)return n.has(e)?n.get(e).length:0;if(e instanceof i)return n.has(e.type)?n.get(e.type).length:0;if(e instanceof RegExp){var r=0;return n.forEach(function(n,i){("string"==typeof i&&t&&e.test(i)||i instanceof RegExp&&f(i,e))&&(r+=n.length)}),r}var o=0;return n.forEach(function(e){o+=e.length}),o}},{key:"dispose",value:function(){return e.removeEventMap(this),this}},{key:"eventMap",get:function(){return e.getEventMap(this)}}],[{key:"getEventMap",value:function(e){return(this.events||(this.events=new WeakMap)).get(e)}},{key:"createEventMap",value:function(e){var t=this.events||(this.events=new WeakMap),n=new Map;return t.set(e,n),n}},{key:"removeEventMap",value:function(e){var t=this.events||(this.events=new WeakMap);t.has(e)&&t.delete(e)}}]),e}();e.Emitter=u,e.Event=i,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=regexp-events.umd.min.js.map

/* regexp-events v0.1.1 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define("regexp-events",["exports"],t):t(e.RegExpEvents=e.RegExpEvents||{})}(this,function(e){"use strict";function t(e,t,n){if(n)e.delete(t);else{var r=e.get(t);r.filter(function(e){return e.removable}).forEach(function(e,t){r.splice(r.indexOf(e),1)}),0===r.length&&e.delete(t)}}function n(e,t){return e instanceof RegExp&&t instanceof RegExp&&t.source===e.source&&t.global===e.global&&t.ignoreCase===e.ignoreCase&&t.multiline===e.multiline&&t.sticky===e.sticky&&t.unicode===e.unicode}function r(e){return!!e&&"object"==typeof e}function o(e){return"string"==typeof e||!v(e)&&r(e)&&h.call(e)==p}function i(e){var t=c(e)?b.call(e):"";return t==y||t==d}function c(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function u(e){return null==e}var a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){a(this,e),this.type=t,this.target=n,this.data=r},p="[object String]",l=Object.prototype,h=l.toString,v=Array.isArray,g=o,y="[object Function]",d="[object GeneratorFunction]",E=Object.prototype,b=E.toString,x=i,m=u,w="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},j=function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(e,t){function n(e){return r(e)&&h.call(e)==o}function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var o="[object RegExp]",i="object"==typeof w&&w&&w.Object===Object&&w,c=t&&!t.nodeType&&t,u=c&&!0&&e&&!e.nodeType&&e,a=u&&u.exports===c,f=a&&i.process,s=function(){try{return f&&f.binding("util")}catch(e){}}(),p=s&&s.isRegExp,l=Object.prototype,h=l.toString,v=p?function(e){return function(t){return e(t)}}(p):n;e.exports=v}),M=function(){function e(){a(this,e),this.suppressEvents=!1}return f(e,[{key:"on",value:function(t,n,r){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(m(t))throw new Error("Emitter.on requires a String or a RegExp as the first argument");if(!x(n))throw new Error("Emitter.on requires a function as the second argument");var i=this.eventMap;return i||(i=e.createEventMap(this)),t instanceof s&&(t=t.type),i.has(t)||i.set(t,[]),i.get(t).push({func:n,ctx:r,once:!1,removable:o}),this}},{key:"once",value:function(t,n,r){if(m(t))throw new Error("Emitter.once requires a String or a RegExp as the first argument");if(!x(n))throw new Error("Emitter.once requires a function as the second argument");var o=this.eventMap;return o||(o=e.createEventMap(this)),t instanceof s&&(t=t.type),o.has(t)||o.set(t,[]),o.get(t).push({func:n,ctx:r,once:!0,removable:!0}),this}},{key:"off",value:function(e,t,r){var o=this.eventMap,i=e;if(!o)return this;if(i instanceof s&&(i=i.type),o.has(i)||o.set(i,[]),g(i)){var c=o.get(i);c.forEach(function(e,n){e.func===t&&r===e.ctx&&c.splice(n,1)}),0===c.length&&o.delete(i)}else j(i)&&o.forEach(function(e,c){j(c)&&n(i,c)&&(e.forEach(function(n,o){n.func===t&&r===n.ctx&&e.splice(o,1)}),0===e.length&&o.delete(c))});return this}},{key:"emit",value:function(e){var t=this;if(!this.suppressEvents){var r=this.eventMap,o=void 0;if(!r)return this;for(var i=arguments.length,c=Array(i>1?i-1:0),u=1;u<i;u++)c[u-1]=arguments[u];o=e instanceof s?e:new s(e,this,c);var a=Array.from(o.data||c).concat([o]);return r.forEach(function(e,r){(g(o.type)&&r===o.type||g(o.type)&&j(r)&&r.test(o.type)||j(o.type)&&j(r)&&n(r,o.type))&&e.forEach(function(e){e.func.apply(e.ctx,a),e.once&&t.off(o.type,e.func,e.ctx,!0)})}),this}}},{key:"clear",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this.eventMap,c=e;return i?(g(c)?t(i,c,r):c instanceof s?this.clear(c.type,o,r):j(c)?Array.from(i).map(function(e){return e[0]}).forEach(function(e){(g(e)&&o&&c.test(e)||j(e)&&n(e,c))&&t(i,e,r)}):1===arguments.length&&!0===c?i.clear():(!1===c||void 0===c&&arguments.length<=1)&&i.forEach(function(e,t){e.filter(function(e){return e.removable}).forEach(function(t){e.splice(e.indexOf(t),1)}),0===e.length&&i.delete(t)}),this):this}},{key:"count",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.eventMap,o=e;if(!r)return 0;if(g(o))return r.has(o)?r.get(o).length:0;if(o instanceof s)return r.has(o.type)?r.get(o.type).length:0;if(j(o)){var i=0;return r.forEach(function(e,r){g(r)&&t&&o.test(r)?i+=e.length:n(r,o)&&(i+=e.length)}),i}var c=0;return r.forEach(function(e,t){c+=e.length}),c}},{key:"eventMap",get:function(){return e.getEventMap(this)}}],[{key:"getEventMap",value:function(e){return(this.events||(this.events=new WeakMap)).get(e)}},{key:"createEventMap",value:function(e){var t=this.events||(this.events=new WeakMap),n=new Map;return t.set(e,n),n}}]),e}();e.Emitter=M,e.Event=s,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=regexp-events.umd.min.js.map

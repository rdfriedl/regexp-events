/* regexp-events v1.0.0 */
function isObjectLike(t){return!!t&&"object"==typeof t}function isString(t){return"string"==typeof t||!isArray(t)&&isObjectLike(t)&&objectToString.call(t)==stringTag}function clearListeners(t,e,n){if(n)t.delete(e);else{let n=t.get(e);n.filter(t=>!t.isStatic).forEach((t,e)=>{n.splice(n.indexOf(t),1)}),0===n.length&&t.delete(e)}}function isRegExpEqual(t,e){return t instanceof RegExp&&e instanceof RegExp&&e.source===t.source&&e.global===t.global&&e.ignoreCase===t.ignoreCase&&e.multiline===t.multiline&&e.sticky===t.sticky&&e.unicode===t.unicode}function createCommonjsModule(t,e){return e={exports:{}},t(e,e.exports),e.exports}function baseGetTag(t){return null==t?void 0===t?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(t)?getRawTag(t):objectToString$1(t)}function getRawTag(t){var e=hasOwnProperty.call(t,symToStringTag),n=t[symToStringTag];try{t[symToStringTag]=void 0;var r=!0}catch(t){}var o=nativeObjectToString.call(t);return r&&(e?t[symToStringTag]=n:delete t[symToStringTag]),o}function objectToString$1(t){return nativeObjectToString.call(t)}function isFunction(t){if(!isObject(t))return!1;var e=baseGetTag(t);return e==funcTag||e==genTag||e==asyncTag||e==proxyTag}function isObject(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function isBoolean(t){return!0===t||!1===t}function findInArgArray(t,e,n,r){for(let r=0;r<t.length-n;r++)if(e(t[n+r]))return t[n+r];return r}var stringTag="[object String]",objectProto=Object.prototype,objectToString=objectProto.toString,isArray=Array.isArray,lodash_isstring=isString;class Event{constructor(t,e,n){if(!lodash_isstring(t))throw new Error("Event.type has to be a string");this.type=t,this.args=e||[],this.target=n}}var commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",nullTag="[object Null]",proxyTag="[object Proxy]",undefinedTag="[object Undefined]",freeGlobal="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),objectProto$1=Object.prototype,hasOwnProperty=objectProto$1.hasOwnProperty,nativeObjectToString=objectProto$1.toString,Symbol=root.Symbol,symToStringTag=Symbol?Symbol.toStringTag:void 0,lodash_isfunction=isFunction,lodash_isregexp=createCommonjsModule(function(t,e){function n(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var r="[object RegExp]",o="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,a=s&&s.exports===i&&o.process,c=function(){try{return a&&a.binding("util")}catch(t){}}(),l=c&&c.isRegExp,g=Object.prototype.toString,f=l?function(t){return function(e){return t(e)}}(l):function(t){return n(t)&&g.call(t)==r};t.exports=f});class Emitter{constructor(){this.suppressEvents=!1}static getEventMap(t){return(this.events||(this.events=new WeakMap)).get(t)}static createEventMap(t){let e=this.events||(this.events=new WeakMap),n=new Map;return e.set(t,n),n}static removeEventMap(t){let e=this.events||(this.events=new WeakMap);e.has(t)&&e.delete(t)}get eventMap(){return Emitter.getEventMap(this)}on(t,e,n,r,o){if(!(lodash_isstring(t)||lodash_isregexp(t)||t instanceof Event))throw new Error("Emitter.on requires a String, Event or RegExp as the first argument");if(!lodash_isfunction(e))throw new Error("Emitter.on requires a function as the second argument");r=findInArgArray(arguments,isBoolean,2,!1),o=findInArgArray(arguments,t=>Number.isFinite(t)||t===1/0,2,1/0),n=findInArgArray(arguments,t=>"object"==typeof t,2,void 0);let i=this.eventMap;return i||(i=Emitter.createEventMap(this)),t instanceof Event&&(t=t.type),i.has(t)||i.set(t,[]),i.get(t).push({func:e,ctx:n,times:o,isStatic:r}),this}once(t,e,n,r){return this.on(t,e,1,n,r)}off(t,e,n,r){if(null==t)throw new Error("Emitter.off requires a String or a RegExp as the first argument");if(!lodash_isfunction(e))throw new Error("Emitter.off requires a function as the second argument");r=findInArgArray(arguments,isBoolean,2,!1),n=findInArgArray(arguments,t=>"object"==typeof t,2,void 0),t instanceof Event&&(t=t.type);let o=this.eventMap;if(!o)return this;if(o.has(t)||o.set(t,[]),lodash_isstring(t)){let i=o.get(t);i.forEach((t,o)=>{t.func!==e||t.ctx!==n||t.isStatic&&!r||i.splice(o,1)}),0===i.length&&o.delete(t)}else lodash_isregexp(t)&&o.forEach((i,s)=>{lodash_isregexp(s)&&isRegExpEqual(t,s)&&(i.forEach((t,o)=>{t.func!==e||t.ctx!==n||t.isStatic&&!r||i.splice(o,1)}),0===i.length&&o.delete(s))});return this}emit(t,...e){if(this.suppressEvents)return;let n,r=this.eventMap;if(!r)return this;if(t instanceof Event)void 0===(n=t).target&&(n.target=this);else{if(!lodash_isstring(t))throw new Error("Emitter.emit requires a String or Event as the first argument");n=new Event(t,e,this)}let o=Array.from(n.args).concat([n]);return r.forEach((t,e)=>{(lodash_isstring(n.type)&&e===n.type||lodash_isstring(n.type)&&lodash_isregexp(e)&&e.test(n.type)||lodash_isregexp(n.type)&&lodash_isregexp(e)&&isRegExpEqual(e,n.type))&&t.forEach(t=>{t.func.apply(t.ctx,o),--t.times<=0&&this.off(n.type,t.func,t.ctx,!0)})}),this}clear(t,e=!1,n=!0){let r=this.eventMap;return r?(lodash_isstring(t)?clearListeners(r,t,e):t instanceof Event?clearListeners(r,t.type,e):lodash_isregexp(t)?Array.from(r).map(t=>t[0]).forEach(o=>{(lodash_isstring(o)&&n&&t.test(o)||lodash_isregexp(o)&&isRegExpEqual(o,t))&&clearListeners(r,o,e)}):1===arguments.length&&!0===t?r.clear():(!1===t||void 0===t)&&arguments.length<=1&&r.forEach((t,e)=>{t.filter(t=>!t.isStatic).forEach(e=>{t.splice(t.indexOf(e),1)}),0===t.length&&r.delete(e)}),this):this}count(t,e=!0){let n=this.eventMap;if(!n)return 0;if(lodash_isstring(t))return n.has(t)?n.get(t).length:0;if(t instanceof Event)return n.has(t.type)?n.get(t.type).length:0;if(lodash_isregexp(t)){let r=0;return n.forEach((n,o)=>{(lodash_isstring(o)&&e&&t.test(o)||lodash_isregexp(o)&&isRegExpEqual(o,t))&&(r+=n.length)}),r}{let t=0;return n.forEach(e=>{t+=e.length}),t}}dispose(){return Emitter.removeEventMap(this),this}}export{Emitter,Event};
//# sourceMappingURL=regexp-events.es.min.js.map

/* regexp-events v0.1.1 */
function clearListeners(e,t,n){if(n)e.delete(t);else{let n=e.get(t);n.filter(e=>e.removable).forEach((e,t)=>{n.splice(n.indexOf(e),1)}),0===n.length&&e.delete(t)}}function isRegExpEqual(e,t){return e instanceof RegExp&&t instanceof RegExp&&t.source===e.source&&t.global===e.global&&t.ignoreCase===e.ignoreCase&&t.multiline===e.multiline&&t.sticky===e.sticky&&t.unicode===e.unicode}function isObjectLike(e){return!!e&&"object"==typeof e}function isString(e){return"string"==typeof e||!isArray(e)&&isObjectLike(e)&&objectToString.call(e)==stringTag}function isFunction(e){var t=isObject(e)?objectToString$1.call(e):"";return t==funcTag||t==genTag}function isObject(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function isNil(e){return null==e}function createCommonjsModule(e,t){return t={exports:{}},e(t,t.exports),t.exports}class Event{constructor(e,t,n){this.type=e,this.target=t,this.data=n}}var stringTag="[object String]",objectProto=Object.prototype,objectToString=objectProto.toString,isArray=Array.isArray,index=isString,funcTag="[object Function]",genTag="[object GeneratorFunction]",objectProto$1=Object.prototype,objectToString$1=objectProto$1.toString,index$1=isFunction,index$2=isNil,commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},index$3=createCommonjsModule(function(e,t){function n(e){return i(e)&&h.call(e)==o}function i(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var o="[object RegExp]",r="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,c=t&&!t.nodeType&&t,s=c&&!0&&e&&!e.nodeType&&e,u=s&&s.exports===c,a=u&&r.process,f=function(){try{return a&&a.binding("util")}catch(e){}}(),l=f&&f.isRegExp,p=Object.prototype,h=p.toString,g=l?function(e){return function(t){return e(t)}}(l):n;e.exports=g});class Emitter{constructor(){this.suppressEvents=!1}static getEventMap(e){return(this.events||(this.events=new WeakMap)).get(e)}static createEventMap(e){let t=this.events||(this.events=new WeakMap),n=new Map;return t.set(e,n),n}get eventMap(){return Emitter.getEventMap(this)}on(e,t,n,i=!0){if(index$2(e))throw new Error("Emitter.on requires a String or a RegExp as the first argument");if(!index$1(t))throw new Error("Emitter.on requires a function as the second argument");let o=this.eventMap;return o||(o=Emitter.createEventMap(this)),e instanceof Event&&(e=e.type),o.has(e)||o.set(e,[]),o.get(e).push({func:t,ctx:n,once:!1,removable:i}),this}once(e,t,n){if(index$2(e))throw new Error("Emitter.once requires a String or a RegExp as the first argument");if(!index$1(t))throw new Error("Emitter.once requires a function as the second argument");let i=this.eventMap;return i||(i=Emitter.createEventMap(this)),e instanceof Event&&(e=e.type),i.has(e)||i.set(e,[]),i.get(e).push({func:t,ctx:n,once:!0,removable:!0}),this}off(e,t,n){let i=this.eventMap,o=e;if(!i)return this;if(o instanceof Event&&(o=o.type),i.has(o)||i.set(o,[]),index(o)){let e=i.get(o);e.forEach((i,o)=>{i.func===t&&n===i.ctx&&e.splice(o,1)}),0===e.length&&i.delete(o)}else index$3(o)&&i.forEach((e,r)=>{index$3(r)&&isRegExpEqual(o,r)&&(e.forEach((i,o)=>{i.func===t&&n===i.ctx&&e.splice(o,1)}),0===e.length&&i.delete(r))});return this}emit(e,...t){if(!this.suppressEvents){let n,i=this.eventMap;if(!i)return this;n=e instanceof Event?e:new Event(e,this,t);let o=Array.from(n.data||t).concat([n]);return i.forEach((e,t)=>{(index(n.type)&&t===n.type||index(n.type)&&index$3(t)&&t.test(n.type)||index$3(n.type)&&index$3(t)&&isRegExpEqual(t,n.type))&&e.forEach(e=>{e.func.apply(e.ctx,o);e.once&&this.off(n.type,e.func,e.ctx,!0)})}),this}}clear(e,t=!1,n=!0){let i=this.eventMap,o=e;return i?(index(o)?clearListeners(i,o,t):o instanceof Event?this.clear(o.type,n,t):index$3(o)?Array.from(i).map(e=>e[0]).forEach(e=>{(index(e)&&n&&o.test(e)||index$3(e)&&isRegExpEqual(e,o))&&clearListeners(i,e,t)}):1===arguments.length&&!0===o?i.clear():(!1===o||void 0===o&&arguments.length<=1)&&i.forEach((e,t)=>{e.filter(e=>e.removable).forEach(t=>{e.splice(e.indexOf(t),1)});0===e.length&&i.delete(t)}),this):this}count(e,t=!0){let n=this.eventMap,i=e;if(!n)return 0;if(index(i))return n.has(i)?n.get(i).length:0;if(i instanceof Event)return n.has(i.type)?n.get(i.type).length:0;if(index$3(i)){let e=0;return n.forEach((n,o)=>{index(o)&&t&&i.test(o)?e+=n.length:isRegExpEqual(o,i)&&(e+=n.length)}),e}{let e=0;return n.forEach((t,n)=>{e+=t.length}),e}}}export{Emitter,Event};
//# sourceMappingURL=regexp-events.es.min.js.map

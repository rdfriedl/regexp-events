!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define("regexp-events",["exports"],t):t(e.RegExpEvents=e.RegExpEvents||{})}(this,function(e){"use strict";function t(e,t,n){if(n)e.delete(t);else{var r=e.get(t);r.filter(function(e){return e.removable}).forEach(function(e,t){r.splice(r.indexOf(e),1)}),0===r.length&&e.delete(t)}}function n(e,t){return e instanceof RegExp&&t instanceof RegExp&&t.source===e.source&&t.global===e.global&&t.ignoreCase===e.ignoreCase&&t.multiline===e.multiline&&t.sticky===e.sticky&&t.unicode===e.unicode}function r(e){return!!e&&"object"==typeof e}function i(e){return"string"==typeof e||!v(e)&&r(e)&&l.call(e)==p}function o(e){var t=a(e)?x.call(e):"";return t==E||t==y}function a(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function c(e){return null==e}var f=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){f(this,e),this.type=t,this.target=n,this.data=r},p="[object String]",h=Object.prototype,l=h.toString,v=Array.isArray,g=i,E="[object Function]",y="[object GeneratorFunction]",d=Object.prototype,x=d.toString,m=o,b=c,M=function(){function e(){f(this,e),this.suppressEvents=!1}return u(e,[{key:"on",value:function(t,n,r){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(b(t))throw new Error("Emitter.on requires a String or a RegExp as the first argument");if(!m(n))throw new Error("Emitter.on requires a function as the second argument");var o=this.eventMap;return o||(o=e.createEventMap(this)),t instanceof s&&(t=t.type),o.has(t)||o.set(t,[]),o.get(t).push({func:n,ctx:r,once:!1,removable:i}),this}},{key:"once",value:function(t,n,r){if(b(t))throw new Error("Emitter.once requires a String or a RegExp as the first argument");if(!m(n))throw new Error("Emitter.once requires a function as the second argument");var i=this.eventMap;return i||(i=e.createEventMap(this)),t instanceof s&&(t=t.type),i.has(t)||i.set(t,[]),i.get(t).push({func:n,ctx:r,once:!0,removable:!0}),this}},{key:"off",value:function(e,t,r){var i=this.eventMap,o=e;if(!i)return this;if(o instanceof s&&(o=e.type),i.has(o)||i.set(o,[]),g(e)){var a=i.get(o);a.forEach(function(e,n){e.func===t&&r===e.ctx&&a.splice(n,1)}),0===a.length&&i.delete(o)}else o instanceof RegExp&&i.forEach(function(e,a){a instanceof RegExp&&n(o,a)&&(e.forEach(function(n,i){n.func===t&&r===n.ctx&&e.splice(i,1)}),0===e.length&&i.delete(a))});return this}},{key:"emit",value:function(e){var t=this;if(!this.suppressEvents){var r=this.eventMap,i=void 0;if(!r)return this;for(var o=arguments.length,a=Array(o>1?o-1:0),c=1;c<o;c++)a[c-1]=arguments[c];i=e instanceof s?e:new s(e,this,a);var f=Array.from(a).concat([i]);return r.forEach(function(e,r){(g(i.type)&&r===i.type||g(i.type)&&r instanceof RegExp&&r.test(i.type)||i.type instanceof RegExp&&r instanceof RegExp&&n(r,i.type))&&e.forEach(function(e){e.func.apply(e.ctx,f),e.once&&t.off(i.type,e.func,e.ctx)})}),this}}},{key:"clear",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=this.eventMap,a=e;return o?(g(a)?t(o,a,r):a instanceof s?this.clear(a.type,i,r):a instanceof RegExp?Array.from(o).map(function(e){return e[0]}).forEach(function(e){(g(e)&&i&&a.test(e)||e instanceof RegExp&&n(e,a))&&t(o,e,r)}):!0===a?o.clear():!1!==a&&void 0!==a||o.forEach(function(e,t){e.filter(function(e){return e.removable}).forEach(function(t){e.splice(e.indexOf(t),1)}),0===e.length&&o.delete(t)}),this):this}},{key:"count",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.eventMap,i=e;if(!r)return 0;if(g(i))return r.has(i)?r.get(i).length:0;if(i instanceof s)return r.has(i.type)?r.get(i.type).length:0;if(i instanceof RegExp){var o=0;return r.forEach(function(e,r){g(r)&&t&&i.test(r)?o+=e.length:n(r,i)&&(o+=e.length)}),o}var a=0;return r.forEach(function(e,t){a+=e.length}),a}},{key:"eventMap",get:function(){return e.getEventMap(this)}}],[{key:"getEventMap",value:function(e){return(this.events||(this.events=new WeakMap)).get(e)}},{key:"createEventMap",value:function(e){var t=this.events||(this.events=new WeakMap),n=new Map;return t.set(e,n),n}}]),e}();e.Emitter=M,e.Event=s,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=regexp-events.umd.js.map

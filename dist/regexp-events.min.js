/* regexp-events v1.0.0 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var stringTag="[object String]",objectProto=Object.prototype,objectToString=objectProto.toString,isArray=Array.isArray;function isObjectLike(e){return!!e&&"object"==typeof e}function isString(e){return"string"==typeof e||!isArray(e)&&isObjectLike(e)&&objectToString.call(e)==stringTag}var lodash_isstring=isString,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Event=function e(t,n,r){if(classCallCheck(this,e),!lodash_isstring(t))throw new Error("Event.type has to be a string");this.type=t,this.args=n||[],this.target=r};function clearListeners(e,t,n){if(n)e.delete(t);else{var r=e.get(t);r.filter(function(e){return!e.isStatic}).forEach(function(e,t){r.splice(r.indexOf(e),1)}),0===r.length&&e.delete(t)}}function isRegExpEqual(e,t){return e instanceof RegExp&&t instanceof RegExp&&t.source===e.source&&t.global===e.global&&t.ignoreCase===e.ignoreCase&&t.multiline===e.multiline&&t.sticky===e.sticky&&t.unicode===e.unicode}var commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",nullTag="[object Null]",proxyTag="[object Proxy]",undefinedTag="[object Undefined]",freeGlobal="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),objectProto$1=Object.prototype,hasOwnProperty=objectProto$1.hasOwnProperty,nativeObjectToString=objectProto$1.toString,Symbol$1=root.Symbol,symToStringTag=Symbol$1?Symbol$1.toStringTag:void 0;function baseGetTag(e){return null==e?void 0===e?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(e)?getRawTag(e):objectToString$1(e)}function getRawTag(e){var t=hasOwnProperty.call(e,symToStringTag),n=e[symToStringTag];try{e[symToStringTag]=void 0;var r=!0}catch(e){}var o=nativeObjectToString.call(e);return r&&(t?e[symToStringTag]=n:delete e[symToStringTag]),o}function objectToString$1(e){return nativeObjectToString.call(e)}function isFunction(e){if(!isObject(e))return!1;var t=baseGetTag(e);return t==funcTag||t==genTag||t==asyncTag||t==proxyTag}function isObject(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var lodash_isfunction=isFunction,lodash_isregexp=createCommonjsModule(function(e,t){var n="[object RegExp]",r="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,o=t&&!t.nodeType&&t,i=o&&e&&!e.nodeType&&e,s=i&&i.exports===o&&r.process,a=function(){try{return s&&s.binding("util")}catch(e){}}(),c=a&&a.isRegExp;var l=Object.prototype.toString;var u,f=c?(u=c,function(e){return u(e)}):function(e){return r=typeof(t=e),!!t&&("object"==r||"function"==r)&&l.call(e)==n;var t,r};e.exports=f});function isBoolean(e){return!0===e||!1===e}function findInArgArray(e,t,n,r){for(var o=0;o<e.length-n;o++)if(t(e[n+o]))return e[n+o];return r}var Emitter=function(){function e(){classCallCheck(this,e),this.suppressEvents=!1}return createClass(e,[{key:"on",value:function(t,n,r,o,i){if(!(lodash_isstring(t)||lodash_isregexp(t)||t instanceof Event))throw new Error("Emitter.on requires a String, Event or RegExp as the first argument");if(!lodash_isfunction(n))throw new Error("Emitter.on requires a function as the second argument");o=findInArgArray(arguments,isBoolean,2,!1),i=findInArgArray(arguments,function(e){return Number.isFinite(e)||e===1/0},2,1/0),r=findInArgArray(arguments,function(e){return"object"===(void 0===e?"undefined":_typeof(e))},2,void 0);var s=this.eventMap;return s||(s=e.createEventMap(this)),t instanceof Event&&(t=t.type),s.has(t)||s.set(t,[]),s.get(t).push({func:n,ctx:r,times:i,isStatic:o}),this}},{key:"once",value:function(e,t,n,r){return this.on(e,t,1,n,r)}},{key:"off",value:function(e,t,n,r){if(null==e)throw new Error("Emitter.off requires a String or a RegExp as the first argument");if(!lodash_isfunction(t))throw new Error("Emitter.off requires a function as the second argument");r=findInArgArray(arguments,isBoolean,2,!1),n=findInArgArray(arguments,function(e){return"object"===(void 0===e?"undefined":_typeof(e))},2,void 0),e instanceof Event&&(e=e.type);var o=this.eventMap;if(!o)return this;if(o.has(e)||o.set(e,[]),lodash_isstring(e)){var i=o.get(e);i.forEach(function(e,o){e.func!==t||e.ctx!==n||e.isStatic&&!r||i.splice(o,1)}),0===i.length&&o.delete(e)}else lodash_isregexp(e)&&o.forEach(function(i,s){lodash_isregexp(s)&&isRegExpEqual(e,s)&&(i.forEach(function(e,o){e.func!==t||e.ctx!==n||e.isStatic&&!r||i.splice(o,1)}),0===i.length&&o.delete(s))});return this}},{key:"emit",value:function(e){var t=this;if(!this.suppressEvents){var n=this.eventMap,r=void 0;if(!n)return this;for(var o=arguments.length,i=Array(o>1?o-1:0),s=1;s<o;s++)i[s-1]=arguments[s];if(e instanceof Event)void 0===(r=e).target&&(r.target=this);else{if(!lodash_isstring(e))throw new Error("Emitter.emit requires a String or Event as the first argument");r=new Event(e,i,this)}var a=Array.from(r.args).concat([r]);return n.forEach(function(e,n){(lodash_isstring(r.type)&&n===r.type||lodash_isstring(r.type)&&lodash_isregexp(n)&&n.test(r.type)||lodash_isregexp(r.type)&&lodash_isregexp(n)&&isRegExpEqual(n,r.type))&&e.forEach(function(e){e.func.apply(e.ctx,a),--e.times<=0&&t.off(r.type,e.func,e.ctx,!0)})}),this}}},{key:"clear",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.eventMap;return r?(lodash_isstring(e)?clearListeners(r,e,t):e instanceof Event?clearListeners(r,e.type,t):lodash_isregexp(e)?Array.from(r).map(function(e){return e[0]}).forEach(function(o){(lodash_isstring(o)&&n&&e.test(o)||lodash_isregexp(o)&&isRegExpEqual(o,e))&&clearListeners(r,o,t)}):1===arguments.length&&!0===e?r.clear():(!1===e||void 0===e)&&arguments.length<=1&&r.forEach(function(e,t){e.filter(function(e){return!e.isStatic}).forEach(function(t){e.splice(e.indexOf(t),1)}),0===e.length&&r.delete(t)}),this):this}},{key:"count",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.eventMap;if(!n)return 0;if(lodash_isstring(e))return n.has(e)?n.get(e).length:0;if(e instanceof Event)return n.has(e.type)?n.get(e.type).length:0;if(lodash_isregexp(e)){var r=0;return n.forEach(function(n,o){(lodash_isstring(o)&&t&&e.test(o)||lodash_isregexp(o)&&isRegExpEqual(o,e))&&(r+=n.length)}),r}var o=0;return n.forEach(function(e){o+=e.length}),o}},{key:"dispose",value:function(){return e.removeEventMap(this),this}},{key:"eventMap",get:function(){return e.getEventMap(this)}}],[{key:"getEventMap",value:function(e){return(this.events||(this.events=new WeakMap)).get(e)}},{key:"createEventMap",value:function(e){var t=this.events||(this.events=new WeakMap),n=new Map;return t.set(e,n),n}},{key:"removeEventMap",value:function(e){var t=this.events||(this.events=new WeakMap);t.has(e)&&t.delete(e)}}]),e}();exports.Emitter=Emitter,exports.Event=Event;
//# sourceMappingURL=regexp-events.min.js.map
